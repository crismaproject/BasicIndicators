<DOCTYPE html5>
<!--
 Peter.Kutschera@ait.ac.at, 2014-02-11
 Time-stamp: "2014-02-18 15:54:56 peter"
-->
<!--
    Copyright (C) 2014  AIT / Austrian Institute of Technology
    http://www.ait.ac.at
 
    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as
    published by the Free Software Foundation, either version 2 of the
    License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.
 
    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see http://www.gnu.org/licenses/gpl-2.0.html
-->
<html lang="en" ng-app="IndicatorApp">
<head>
  <meta charset="utf-8">
  <title>Indicator Viewer</title>
  <link rel="stylesheet" href="css/app.css">
  <link rel="stylesheet" href="css/bootstrap.css">
  <script src="js/angular.min.js"></script>
  <script src="js/moment.min.js"></script>
  <script src="js/jquery-2.0.3.min.js"></script>
  <script src="js/spin.min.js"></script>
  <script src="js/jquery.spin.js"></script>
  <link rel="stylesheet" href="css/tree.css">
  <script src="js/d3.v3/d3.v3.js" charset="utf-8"></script>
  <script src="libs/indicatorControllers.js"></script>
  <script src="libs/createWorldStateTree.js"></script>
  <script src="libs/drawBars.js"></script>
  <!-- bootstrap -->
  <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="bootstrap/css/bootstrap-theme.min.css">
  <script src="bootstrap/js/bootstrap.min.js"></script>
</head>

<body ng-controller="IndicatorCtrl">
    <table class="table">
      <tr>
	<td id="table">Select a baseline WorldState:</td>
	<td><select ng-model="baseline" ng-options="s.worldStateId for s in baselines"></select></td>
	<td><button type="button" class="btn btn-primary" ng-click="createWorldStateTree()">Show WorldState tree</button></td>
      </tr>
    </table>

    <table class="table">
      <tr><td ng-if="baselineSelected" >Select one (click) or more (control klick) WorldStates:</td></tr>
      <tr><td><div id="worldstate-tree"></div></td></tr>
    </table>

    <!-- If I try to hide either the table or just td using   ng-if="selectedWorldStates.length" then $scope.byWorldState is NOT updated! -->
    <table class="table">
      <tr><td><input type="checkbox" ng-model="byWorldState" ng-change="drawIndicatorBars()"> Group indicators by WorldState</td></tr>
      <tr><td><div id="indicatorBars"></div></td></tr>
    </table>

    <p>

      <ul class="indicators" id="list">
	<li ng-repeat="selectedWorldState in selectedWorldStates">
	  <h4>Indicator values for WorldState {{selectedWorldState}}:</h4>
	  <ul>
	    <li ng-repeat="indicator in indicators[selectedWorldState] track by $index">
	      {{indicator}}
	    </li>
	  </ul>
	</li>
      </ul>
      
    </p>
    
</body>
</html>
